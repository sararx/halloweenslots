<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Halloween Slot Machine</title>
<style>
  html,body{
    margin:0;padding:0;
    background:radial-gradient(circle at 50% 40%,#1a0b00 0%,#000 100%);
    height:100%;width:100%;
    display:flex;flex-direction:column;
    justify-content:center;align-items:center;
    font-family:Arial, sans-serif;
    user-select:none;
  }

  .machine{
    background:#111;
    border:6px solid #ff6600;
    border-radius:20px;
    padding:30px 40px;
    box-shadow:0 0 40px rgba(255,102,0,0.5), inset 0 0 20px rgba(255,136,0,0.3);
    display:flex;flex-direction:column;align-items:center;
  }

  .reels{
    display:flex;gap:20px;margin-bottom:30px;
  }

  .reel{
    width:120px;height:120px;
    background:#000;
    border:4px solid #ff9900;
    border-radius:10px;
    overflow:hidden;
    position:relative;
    box-shadow:0 0 15px rgba(255,102,0,0.5);
  }

  .strip{
    position:absolute;
    top:0;left:0;right:0;
    will-change:transform;
  }

  .cell{
    height:120px;
    display:flex;align-items:center;justify-content:center;
    font-size:80px;
  }

  .buttons{display:flex;gap:20px;}
  button{
    background:#ff6600;color:#fff;
    font-size:20px;font-weight:bold;
    border:none;border-radius:10px;
    padding:12px 30px;
    cursor:pointer;
    box-shadow:0 0 15px rgba(255,102,0,0.7);
  }
  button:hover{background:#ff8533;}
  button:active{transform:scale(0.97);}
  button:disabled{background:#444;color:#888;cursor:not-allowed;box-shadow:none;}

  #result{
    margin-top:25px;
    color:#ffcc00;
    font-size:24px;
    visibility:hidden;
  }
</style>
</head>
<body>

<div class="machine">
  <div class="reels">
    <div class="reel" id="r1"><div class="strip"></div></div>
    <div class="reel" id="r2"><div class="strip"></div></div>
    <div class="reel" id="r3"><div class="strip"></div></div>
  </div>
  <div class="buttons">
    <button id="spinBtn" onclick="spin()">SPIN</button>
    <button onclick="reveal()">REVEAL</button>
  </div>
  <div id="result"></div>
</div>

<script>
const allCombos=[
  {e:["👻","🚫","🧑‍🔬"],t:"Ghostbusters"},
  {e:["🤡","🎈","🚲"],t:"It"},
  {e:["🏨","🪓","🚪"],t:"The Shining"},
  {e:["🔪","😱","📞"],t:"Scream"},
  {e:["🧛","🩸","🌙"],t:"Dracula"},
  {e:["⚰️","👰","💍"],t:"Corpse Bride"},
  {e:["🪚","🏠","😵"],t:"Texas Chainsaw Massacre"},
  {e:["⚡","🧠","🧟"],t:"Frankenstein"},
  {e:["🛌","🌳","🧤"],t:"A Nightmare on Elm Street"}
];

let available = [...allCombos];
const symbols=[...new Set(allCombos.flatMap(c=>c.e))];
let current="", spinning=false;

function buildStrip(target, cycles){
  let s="";
  for(let i=0;i<cycles;i++){
    const sym=symbols[Math.floor(Math.random()*symbols.length)];
    s+=`<div class="cell">${sym}</div>`;
  }
  s+=`<div class="cell">${target}</div>`;
  return s;
}

function spin(){
  if(spinning)return;
  if(available.length===0){
    document.getElementById("spinBtn").disabled=true;
    document.getElementById("result").style.visibility="visible";
    document.getElementById("result").textContent="No more spins 🎃";
    return;
  }

  spinning=true;
  document.getElementById("result").style.visibility="hidden";

  // Pick and remove one random combo
  const idx=Math.floor(Math.random()*available.length);
  const pick=available.splice(idx,1)[0];
  current=pick.t;

  const reels=[r1,r2,r3];
  const times=[1500,1800,2100];
  reels.forEach((reel,i)=>{
    const strip=reel.querySelector(".strip");
    strip.style.transition="none";
    strip.style.transform="translateY(0)";
    strip.innerHTML=buildStrip(pick.e[i],16+i*2);
    void strip.offsetHeight;
    const h=reel.clientHeight;
    const cells=strip.children.length-1;
    strip.style.transition=`transform ${times[i]}ms cubic-bezier(.17,.67,.83,.67)`;
    strip.style.transform=`translateY(-${h*cells}px)`;
  });
  setTimeout(()=>spinning=false,2300);
}

function reveal(){
  const res=document.getElementById("result");
  res.textContent=current;
  res.style.visibility="visible";
}

// Initialize
[r1,r2,r3].forEach(r=>r.querySelector(".strip").innerHTML='<div class="cell">🎃</div>');
</script>

</body>
</html>
